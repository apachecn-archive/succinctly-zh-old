## 在 Docker 容器中运行 HBase

使用 Docker 容器的优点是，您可以用很少的开销来启动和终止实例，而且您不必担心任何软件或服务与开发机器冲突。

图像 hbase-succinctly 是我专门为了配合本书而设置的图片，它设置了我们将要使用的服务。要使用该映像，请安装 Docker 并执行代码清单 5 中的命令：

代码清单 5：在 Docker 中运行 HBase

```
docker run -d -p 2181:2181 \
 -p 60010:60010 -p 60000:60000 \
 -p 60020:60020 -p 60030:60030 \
 -p 8080:8080 -p 8085:8085 \
 -p 9090:9090 -p 9095:9095 \
 --name hbase -h hbase \
 sixeyed/hbase-succinctly

```

泊坞窗 运行命令中的某些设置是可选的，但如果您想要与本书中的示例一起编码，则需要运行完整命令。如果您不熟悉 Docker，请执行以下命令：

· 从公共 Docker Hub 中的 sixeyed 存储库中拉出名为 hbase-succinctly 的图像

· 在本地运行容器中的图像，为服务器和 Web UI 公开所有关键端口

· 将图像命名为 hbase ，因此我们可以使用其他 Docker 命令控制它，而无需知道 Docker 将分配的容器 ID

· 为图像提供主机名 hbase ，因此我们可以使用该名称访问它

第一次运行时，需要一段时间才能将映像从注册表中提取到本地计算机，但是对于将来的运行，容器将在几秒钟内启动，并且您将拥有一个具有 Java 功能的 HBase 实例， REST 和 Thrift API 正在运行。

![](img/00008.jpeg) 注意：此 Docker 命令公开 Zookeeper 的所有端口，HBase 外部 API 和 Web UI。如果它们与您计算机上的其他服务器冲突，您可以通过更改-p 参数上冒号前的数字来更改本地端口。例如，要让 Thrift 监听 Docker 主机上的端口 91 而不是 9090，请使用-p 91：9090。

此映像使用本地文件系统进行 HBase 数据存储，当容器被终止时不会保留，因此您可以使用 docker kill hbase 将数据库重置回原始状态，然后重复 docker run 命令。