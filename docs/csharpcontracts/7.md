为了说明代码合同中定义的前提条件的失败，我在方法调用中硬编码了无效的序列号。作为控制台应用程序，对方法的调用包含在 try / catch 语句中，该语句将错误输出到控制台。请考虑以下代码清单。

```
static void Main(string[] args)
{
    try
    {
        ERPIntegration.AddSerializedItem("BC32WL", 70012, 1);
    }
    catch (Exception ex)
    {
        Console.Write(ex.Message);
        Console.ReadLine();
    }
}

```

代码 3：代码合同前提条件

运行控制台应用程序时，将抛出异常并显示在控制台窗口中。使用具有自定义异常的代码合同（例如代码清单 2 中所示的代码合约）时，必须将代码合同装配模式属性设置为**标准合同要求**。

![](img/00011.jpeg)

图 8：前提条件失败

前面的示例是一种说明代码约定功能的简单方法。但是，在生产系统中，显然在方法调用中没有硬编码值。这些值来自数据库或来自用户输入的可能性非常高。众所周知，所有输入（用户或数据存储）都是我们无法控制的，我们应该这样对待它。代码契约减轻了不良数据的负面影响。

虽然前面的示例是有效的，但我想从代码合同中获得更多。我不想运行我的应用程序，然后意识到有一些代码段导致我的合同失败。就个人而言，我希望在构建项目时看到任何失败。这个项目足够小，所以我可以对“项目属性”窗口中指定的“代码合约”属性有点讽刺。