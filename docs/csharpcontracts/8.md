## 失败建立警告

返回 Code Contracts 属性页面，如果尚未执行此操作，请启用**执行静态合同检查**。接下来，您需要清除背景选项中的**检查。然后您将看到启用了 **Fail build on warnings** 选项。选择此选项。**

![](img/00012.jpeg)

图 9：在警告上启用失败构建

继续构建您的项目。静态合同检查立即启动，并且由于您的代码合同未通过，您的构建将失败，如图 10 所示。但是，存在问题。即使您的构建失败，您的**错误列表**也为空。因为我们只有一个代码合同，所以我们知道在哪里看。但是，当我们有几个代码契约时，这是不可行的。

![](img/00013.jpeg)

图 10：Visual Studio 2015 构建失败

出了什么问题？要找到导致构建失败的问题，请转到 **Output** 窗口。如果没有看到“输出”窗口，请按 **Ctrl + W，O** 使其进入视图。然后，您将看到构建的结果和失败的代码合同。

![](img/00014.jpeg)

图 11：Visual Studio 输出窗口

使用代码约定的当前版本 1.9.10714.2，未输出到**错误列表**的构建错误已被识别为 Visual Studio 2015 发行版中的错误。此错误已得到修复，将包含在内在下一版代码合约中。有关与 Visual Studio 2015 代码约定相关的此问题的更多信息，请查看 GitHub 上的 [pull 请求 166](https://github.com/Microsoft/CodeContracts/pull/166) 和 [issue 137](https://github.com/Microsoft/CodeContracts/issues/137) 。如果您想查看有关代码合同的所有未解决问题，请查看代码合同 GitHub 页面上的[问题](https://github.com/Microsoft/CodeContracts/issues)。

代码契约是少数专职人士不断努力改进当前版本的结果。像我们这样的用户可以报告我们遇到的问题，并在此过程中建立一个健康的影响者社区和更稳定的产品。最后，由于它是开源的，您可以为代码契约做出贡献，并成为这个令人难以置信的 Visual Studio 扩展的一部分。