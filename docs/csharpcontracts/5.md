有很多例子说明了代码合同的使用。他们中的很多人似乎使用原始的非现实世界的例子来解释代码契约的使用。虽然我理解这样做的好处，但我觉得使用现实世界的例子更可取。那么什么才能被归类为一个合适的例子呢？好吧，几年前我正在研究一个正在实施的系统来取代现有的 ERP 系统。旧的和新的 ERP 系统都使用数字序列号，但我们为新 ERP 开发的集成只能使用新的序列号。

旧的 ERP 系统被保留用于历史目的，因此集成必须确保它仅使用对新 ERP 系统有效的序列号。我们决定启动超过一亿的所有序列号。这意味着创建的第一个序列号将是 100,000,001。低于此值的任何序列号（有效时）不应允许进入新的 ERP 系统。

在 Visual Studio 2015 中，首先使用语句将以下添加到您的类中。

```
using System.Diagnostics.Contracts;

```

代码清单 1：必需使用语句

如果您使用语句在没有的情况下开始编写代码约定的代码，Visual Studio 2015 将提示您通过新的灯泡生产力功能添加它，如图 7 所示。

![](img/00010.jpeg)

图 7：Visual Studio 2015 灯泡功能

您会注意到 Visual Studio 2015 提出了一些更正。在图 7 中，您看到使用语句的是第一个建议，并且是我们需要在此实例中应用的修复。

### Visual Studio 2015 灯泡

此生产力功能是 Visual Studio 2015 中的新功能。灯泡会自动出现在 Visual Studio 编辑器中，并在当前键入的代码行上向开发人员提供错误修复和重构建议。也可以通过在一行代码上按 **Ctrl + Period** 手动调用灯泡，以查看潜在修复列表。